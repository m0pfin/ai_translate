# ai_translate
Скрипт автоматического перевода лендингов/прелендингов на все языки мира с помощью API ChatGPT <br>
Public: https://t.me/bearded_cpa

AI Translate v1.2

И так что из себя представляет скрипт AI Translate v1.2 - это автоматический перевод любого лендинга/прелендинга на язык пользователя с помощью нейросетей, а именно ChatGPT, сначала была идея переводить по IP - юзера, но это быстро забраковал, так как определять IP-adress и его страну оказалось не так надежно, как определять язык телефона/браузера юзера что дает более точный таргетинг на язык конечного пользователя. 
<br>
Скрипт автоматически определяет язык юзера - проверяет нет ли такого перевода у него уже в сохраненной папке /cache и если его там не оказалось, если этой папки еще нет то скрипт автоматически создаст ее сам, отправляет запрос в ChatGPT и полученным переводом заменяет весь контент на странице на нужный язык. Звучит просто, но на деле это не так.<br>
И так скрипт состоит из двух файлов <br>
translate.js
translate.php


<br>
4. Вам необходимо или создать эти два файла и вставить туда код, или загрузить в папку с лендингом в корневую папку где у вас находится файл index.html/php
<br>
5. Подключение очень простое - в самый низ страницы index.html/php перед закрывающим тегом </body> вставить следующий код:
<br>
<!-- Скрипт перевода -->
<script src="translate.js"></script>
<br>
7. В самом начале страницы index.html/php вставить:
<br>
<html data-country="en">
<br>
<br>
где - en это исходный язык лендинга, это делается чтобы заранее указать GPT с какого языка переводить, если забудете вставить ничего страшного, но чуть ускоряет перевод для GPT желательно знать изначальный язык
 <br>   
8. Настройки - это самое главное, так как все ленды разные и длина текста, объем текста, и прочее. 
<br>
    <br>
translate.js 
    <br>
    <br>
  // НАСТРОЙКИ 
  const longMode = 0;     // 1 – включен режим long
  const CHUNK_SIZE = 7;   // оптимальный размер чанка можно подобрать экспериментально
longMode - режим длинного лендинга, создан для того чтобы облегчить и ускорить скорость перевода больших страниц, 
0 - выключен, идеально подходит под короткие ленды справляется в считанные секунды комфортно и быстро отрабатывает.
1 - включен, для длинных лендингов обязательно включаем, иначе большой объем текста GPT не вывезет и будет сыпать ошибкой 504 - time out error - превышено время запроса
2. CHUNK_SIZE - данная настройка предназначена только для длинных лендингов, отвечает за "разбивку" текста на части если текст большой то желательно этот параметр выставлять поменьше, подбирается экспериментально по умолчанию 20, но если слишком долго переводит или выбивает ошибки уменьшаем этот параметр, пока не добьемся желаемого результата. 
<br>
ВАЖНО: Чем  больше чанков (частей) а именно у нас цепочка текста из 200 строк, мы разбиваем по 10 соотвественно у нас 20 запросов в GPT - это увеличивает затраты на API поэтому имейте это ввиду. 
<br>
Да это нивелируется тем что сделав перевод 1 раз на нужный нам язык, мы больше не будем тратиться на перевод, так как первый успешный перевод, сохраняется в память лендинга и в будущем у всех юзеров с языком допустим DE - будет октрываться сохраненная версия перевода, которая открывается моментально, и без запросов и затрат на перевод.
<br>
Очень важно найти оптимальные настройки, так как трудно найти универсальные под разные лендинги, но стоит отметить что под короткие ленды подходят и универсальные настройки. 


<br>
<br>
translate.php
<br>
<br>

На моем сервере мне не нужна первая строка поэтому я ее закоментировал, если увидите в консоли разработчика ошибку связанную с CORS расскоментируйте первую строку



// ====== Настройка CORS ======

//header('Access-Control-Allow-Origin: *'); // Разрешить доступ с любых доменов (при необходимости расскоментировать, если будет ругаться на CORS)
header('Access-Control-Allow-Methods: POST, OPTIONS');
header('Access-Control-Allow-Headers: Content-Type');
header('Content-Type: application/json; charset=utf-8');
   

// Модели - это модель ChatGPT, которая будет использоваться для перевода, в зависимости от ситуации нужно выбирать модель под себя, но обычно везде хватает gpt3.5-turbo



Тут поясню, что у меня был лендинг который ни в какую не переводился адекватно, сыпал ошибками, что я только не перепробовал, но именно он отказывался адекватно переводится, решилось сменой модели на gpt4-turbo



Какую модель использовать просто закомментируйте ненужную и расскоментируйте нужную модель
Пояснение gpt3.5-turbo - самая быстрая и дешевая модель, но бывает ошибается чем gpt4 - он умнее и точнее понимает контекст и дает более качественный перевод, но медленее (рекомандуется для качетсвенного перевода)
gpt3.5 - хуже справляется с языками третьих стран, бангладеш, арабские и т.д. - но перед тем как менять проверьте у себя


$model = 'gpt-3.5-turbo';

//$model = 'gpt-4';

//$model = 'gpt-4-turbo';

//$model = 'gpt-4o-mini';



// Ключ API от OpenAI – замените на свой реальный ключ

$OPENAI_API_KEY = 'sk-';



Вопрос-Ответ: 

Как проверить перевод?
Скачиваем расширение в браузер Chrome: https://chromewebstore.google.com/detail/locale-switcher/kngfjpghaokedippaapkfihdlmmlafcc и с помощью него тестируем
Хочу заранее перевести лендинг чтобы быть уверенным что пользователи увидят корректный перевод?
Тоже самое, скачиваем расширение, переходим на лендинг ставим нужный язык в расширении, ждем перевод, и всё когда вы видите переведенную страницу, это означает что перевод сохранился, можете поменять язык на другой и поставить опять нужный чтобы увидеть как быстро подгрузится готовый перевод
Не переводится - что делать?
Да и правда бывает что с первого раза скрипт не может адекватно перевести ленд, и нужно пару раз обновить и дождаться полностью перевода
Как удалить готовый перевод, я поменял изначальный текст на лендинге?
Если вы отредактировали ленд, добавили или удалили блоки с текстом, зайдите в редактирование лендинга в кейтаро, все ваши переводы в папке /cache удалите оттуда все переводы, и новый клик автоматически запустит перевод через GPT обновленного текста
Что-то ваще не работает?
Если вы столкнулись с нерешаемой проблемой, тогда напишите мне в личку будем разбираться, контакты в паблике


Да забыл сказать, что скрипт работает прям в трекере Keitaro тоесть не нужно ничего на хостинг отдельно грузить или еще куда-то, просто к каждому ленду добавляем два выше упомянутых файла.
